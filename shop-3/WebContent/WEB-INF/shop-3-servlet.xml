<?xml version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation=
       "http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans.xsd 
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc.xsd
       http://www.springframework.org/schema/context 
       http://www.springframework.org/schema/context/spring-context.xsd">
       

<mvc:annotation-driven/>

<!-- handlerMapping : URL요청정보와 컨트롤러를 매핑 시켜주는 역할  (아래에선 ControllerClassNameHandlerMapping 즉, 클래스 명으로 


	url Path로 Controller를 결정해준다.

		(url)	->ControllerClassnameHandlerMapping에 의해	(controller)	->뷰resolver에 의해 (view)
	/shop-3/item/list.shop 으로 요청이 들어오게 되면? -> ItemController이 선택됨 -> /View폴더/item/list.jsp
-->

<bean class = "org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/> <!--base-package안에 있는  component 어노테이션을 스캔해서, 빈을 등록 -->
<context:component-scan base-package="controller, dao, logic, utils"/>

<!-- 뷰 결정자 -->
<bean id = "viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
	<property name="viewClass">
		<value>org.springframework.web.servlet.view.JstlView</value>
	</property>
	<property name="prefix">
		<value>/WEB-INF/jsp/</value>
	</property>
	<property name="suffix">
		<value>.jsp</value>
	</property>
</bean>
<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
	<property name="basenames">
		<list>
			<value>messages</value>
		</list>
	</property>
</bean>

<bean id = "multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" p:maxUploadSize="104857600" p:maxInMemorySize="104857600"/>
	<!-- 예외 발생시 호출되는 뷰를 설정하기 -->
<bean id = "exceptionHandler" class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
	<property name="exceptionMappings">
		<value>
			exception.LoginRequiredException=dummyLogin
			exception.CartEmptyException=cartEmpty
			exception.PasswordFailException=passwordFail
			<!--exception.CartEmptyException이 발생하면, cartEmpty라는 jsp파일로 넘어가도록 설정.  -->
		</value>
	</property>
</bean>
</beans>